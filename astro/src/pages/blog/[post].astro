---
import dayjs from 'dayjs';
import PostLayout from '../../layouts/PostLayout.astro';

export async function getStaticPaths() {
  const response = await fetch('https://wp.khaosophy.com/wp-json/wp/v2/posts');
  const posts = await response.json();

  return posts.map(post => {
    return {
      params: { post: post.slug },
			props: {
				postTitle: post.title.rendered,
				content: post.content.rendered,
				date: post.date,
				excerpt: post.excerpt.rendered,
			},
    }
  });
}
const { postTitle, content, date, excerpt } = Astro.props;
---
<PostLayout
	title={postTitle}
	description={excerpt}
>
	<small style="position: absolute;"><a href="/">‚Üê Back to Blog</a></small>
	<h1 style="
		margin-bottom: 0.4375rem;
		font-family: 'Montserrat', sans-serif;
	">{postTitle}</h1>
	<small>Published {dayjs(date).format('MMMM D, YYYY')}</small>
	<div style="margin-top: 20px">{content}</div>
</PostLayout