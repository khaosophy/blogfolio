---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Excerpt from '../components/Excerpt.astro';
import PageMeta from '../components/PageMeta.astro';

const response = await fetch('https://wp.khaosophy.com/wp-json/wp/v2/posts');
const posts = await response.json();
---
<html lang="en">
<head>
	<PageMeta
		title="All posts"
		description="Casey is a front end developer with a background in SEO and business management."
	/>
</head>
<body>
	<Header />
	<main>
		{posts.map(post => (
			<Excerpt
				id={post.id}
				date={post.date}
				slug={post.slug}
				title={post.title.rendered}
				summary={post.excerpt.rendered}
			/>
		))}
	</main>
	<Footer />
</body>
</html>
